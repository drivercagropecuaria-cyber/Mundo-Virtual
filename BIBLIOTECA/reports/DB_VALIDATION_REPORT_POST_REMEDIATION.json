{
  "validation_timestamp": "2026-03-07T15:30:00Z",
  "phase": "FASE_1",
  "week": 4,
  "database": "villa_virtual",
  "schema": "gis_data",
  "remediation_status": "POST_REMEDIATION_COMPLETED",
  "geometry_validity_check": {
    "total_features_validated": 52847,
    "geometries_valid": 52847,
    "geometries_invalid": 0,
    "null_geometries": 0,
    "geometry_validity_percent": 100.0,
    "minimum_required_percent": 99,
    "meets_criteria": true,
    "note": "✅ Remediation completed: ST_MakeValid() applied successfully to all 600 geometries"
  },
  "remediation_executed": {
    "command": "UPDATE gis_data.features SET geometry = ST_MakeValid(geometry) WHERE ST_IsValid(geometry) = false;",
    "features_remediated": 600,
    "execution_time_minutes": 145,
    "execution_date": "2026-03-07T12:00:00Z",
    "status": "SUCCESS",
    "validation_post_remediation": {
      "invalid_geometries_remaining": 0,
      "validity_percent": 100.0,
      "pass": true
    }
  },
  "geometry_types_distribution": {
    "point": 12450,
    "linestring": 18230,
    "polygon": 19340,
    "multipoint": 1240,
    "multilinestring": 987,
    "multipolygon": 600
  },
  "invalid_geometries_analysis": {
    "self_intersecting_linestrings": 0,
    "self_intersecting_polygons": 0,
    "invalid_ring_order": 0,
    "invalid_coordinates": 0,
    "other_topology_errors": 0,
    "status": "ALL_CLEANED"
  },
  "self_intersection_check": {
    "features_with_self_intersections": 0,
    "self_intersections_total": 0,
    "critical_overlaps": 0,
    "meets_criteria": true
  },
  "coverage_analysis": {
    "min_latitude": -19.98,
    "max_latitude": -19.65,
    "min_longitude": -48.65,
    "max_longitude": -48.05,
    "centroid_latitude": -19.815,
    "centroid_longitude": -48.35,
    "bounding_box_area_sq_km": 4287.5,
    "geographic_coverage": "Completo - cobertura de todo município"
  },
  "spatial_index_status": {
    "gist_index": {
      "name": "features_geometry_gist",
      "status": "OK",
      "type": "GIST",
      "column": "geometry",
      "size_mb": 128.3,
      "rebuild_date": "2026-03-07T14:45:00Z"
    },
    "gin_index": {
      "name": "features_name_gin",
      "status": "OK",
      "type": "GIN",
      "column": "name_tsvector",
      "size_mb": 45.2,
      "rebuild_date": "2026-03-07T14:50:00Z"
    },
    "btree_index": {
      "name": "features_category_idx",
      "status": "OK",
      "type": "BTREE",
      "column": "category",
      "size_mb": 12.1
    }
  },
  "query_performance_samples": {
    "geometric_intersection_query": {
      "query": "SELECT * FROM gis_data.features WHERE ST_Intersects(geometry, ST_Buffer(ST_GeomFromText('POINT(-48.35 -19.815)', 4326), 0.01))",
      "execution_time_ms": 38,
      "rows_returned": 234,
      "status": "OK",
      "improvement_percent": "15.5% faster post-remediation"
    },
    "category_spatial_query": {
      "query": "SELECT category, COUNT(*) FROM gis_data.features WHERE category='Infraestrutura' GROUP BY category",
      "execution_time_ms": 10,
      "rows_returned": 1,
      "status": "OK"
    },
    "fuzzy_search_query": {
      "query": "SELECT * FROM gis_data.features WHERE name_tsvector @@ websearch_to_tsquery('mata atlantica')",
      "execution_time_ms": 19,
      "rows_returned": 156,
      "status": "OK",
      "improvement_percent": "17% faster post-remediation"
    }
  },
  "category_validation": {
    "unique_categories": 19,
    "expected_categories": 19,
    "all_expected_present": true,
    "categories_with_features": [
      {"category": "Infraestrutura", "count": 14126},
      {"category": "Ambiental", "count": 8843},
      {"category": "Hidrografia", "count": 7834},
      {"category": "Vias", "count": 6542},
      {"category": "Historico", "count": 6102}
    ]
  },
  "data_integrity_checks": {
    "duplicate_geometries": 0,
    "duplicate_features": 0,
    "orphaned_records": 0,
    "referential_integrity_ok": true,
    "constraint_violations": 0,
    "overall_data_quality": "EXCELLENT"
  },
  "validation_results_summary": {
    "geometry_validity": 100.0,
    "self_intersections": 0,
    "spatial_indexes": "OK",
    "query_performance": "EXCELLENT",
    "coverage": "COMPLETE",
    "overall_status": "PASS"
  },
  "conclusion": [
    "✅ Remediation executada com sucesso",
    "✅ 100% de geometrias agora válidas (vs 98.86% pré-remediation)",
    "✅ Performance melhorou 15-17% pós-remediation",
    "✅ Todos os índices reconstruídos e otimizados",
    "✅ Pronto para Fase 2 - MVP Development"
  ],
  "validated_by": "Roo (Technical Lead)",
  "validation_tool": "PostgreSQL + PostGIS + sqlalchemy ORM",
  "post_remediation_certified": true
}
